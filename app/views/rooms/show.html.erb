<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @room.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @room.description %>
</p>

<p>
  <strong>Bed:</strong>
  <%= @room.bed %>
</p>

<p>
  <strong>Lux:</strong>
  <%= @room.lux %>
</p>

<p id="notice"><%= notice %></p>

<h1>Prices</h1>
    <% @room.price.each do |price|
      base = price.price
      stroke = Array(sprintf("₽%2.2f",base))
      @tar = []
      price.taryph.each {|i| per = i.udate.to_s + "<->" + i.edate.to_s; cen = sprintf("₽%2.2f",price.price+i.index); @tar.push([per,cen])}
      stroke.push(@tar)
      str = stroke.join(',').split(',')
     %>

<p>
Today price
<% price.taryph.each {|i| @index = i.index if Date.parse(i.udate.to_s) < Date.today and Date.parse(i.edate.to_s) < Date.today} %>
<%= sprintf("₽%2.2f",price.price+@index) %>
</p>

<table>
  <thead>
    <tr>
      <th>Price</th>
      <th colspan="5"></th>
    </tr>
  </thead>


<% str.each_slice(str.count) do |line|%>
  <tr>
  <% line.each do |item| %>
  <td>
  <%if item.include? "₽"%>
  <%= item %>
  <% else%>
  <strong><%= item %></strong>
  <% end %>
  </td>
    <% end %>
       </tr>
    <% end %>
    <% end %>
 
</table>

<br>

<%= link_to 'Back', hotel_rooms_path %>|
<%= link_to 'Prices', ([@hotel, @room,'prices']) %>|
<%= link_to 'Booking', {controller: "bookings", action: "new", hotel_id: params[:hotel_id], room_id: params[:id]} %>


